!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){var r;!function(i){"use strict";var o="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(e,n){var t=65535&e,r=65535&n;return t*r+((e>>>16&65535)*r+t*(n>>>16&65535)<<16>>>0)|0}:Math.imul,a="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(e,n){return e.repeat(n)}:function(e,n){for(var t="";n>0;)1&n&&(t+=e),n>>=1,e+=e;return t};function u(e){if(!(this instanceof u))return new u(e);if(null==e)e=u.engines.nativeMath;else if("function"!=typeof e)throw new TypeError("Expected engine to be a function, got "+typeof e);this.engine=e}var s=u.prototype;function c(e){return function(){return e}}function l(e,n){return 0===n?e:function(t){return e(t)+n}}function d(e){var n=+e;return n<0?Math.ceil(n):Math.floor(n)}function f(e,n){return e<0?Math.max(e+n,0):Math.min(e,n)}function h(){}u.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(e){function n(e){for(var n=0,t=0;(0|n)<227;n=n+1|0)t=2147483648&e[n]|2147483647&e[n+1|0],e[n]=e[n+397|0]^t>>>1^(1&t?2567483615:0);for(;(0|n)<623;n=n+1|0)t=2147483648&e[n]|2147483647&e[n+1|0],e[n]=e[n-227|0]^t>>>1^(1&t?2567483615:0);t=2147483648&e[623]|2147483647&e[0],e[623]=e[396]^t>>>1^(1&t?2567483615:0)}return function(){var t=new e(624),r=0,i=0;function a(){(0|r)>=624&&(n(t),r=0);var e=t[r];return r=r+1|0,i+=1,0|function(e){return e^=e>>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>>18}(e)}return a.getUseCount=function(){return i},a.discard=function(e){for(i+=e,(0|r)>=624&&(n(t),r=0);e-r>624;)e-=624-r,n(t),r=0;return r=r+e|0,a},a.seed=function(e){var n=0;t[0]=n=0|e;for(var u=1;u<624;u=u+1|0)t[u]=n=o(n^n>>>30,1812433253)+u|0;return r=624,i=0,a},a.seedWithArray=function(e){return a.seed(19650218),function(e,n){for(var t=1,r=0,i=n.length,a=0|Math.max(i,624),u=0|e[0];(0|a)>0;--a)e[t]=u=(e[t]^o(u^u>>>30,1664525))+(0|n[r])+(0|r)|0,++r,(0|(t=t+1|0))>623&&(e[0]=e[623],t=1),r>=i&&(r=0);for(a=623;(0|a)>0;--a)e[t]=u=(e[t]^o(u^u>>>30,1566083941))-t|0,(0|(t=t+1|0))>623&&(e[0]=e[623],t=1);e[0]=2147483648}(t,e),a},a.autoSeed=function(){return a.seedWithArray(u.generateEntropyArray())},a}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?function(){var e=null,n=128;return function(){return n>=128&&(null===e&&(e=new Int32Array(128)),crypto.getRandomValues(e),n=0),0|e[n++]}}():null},u.generateEntropyArray=function(){for(var e=[],n=u.engines.nativeMath,t=0;t<16;++t)e[t]=0|n();return e.push(0|(new Date).getTime()),e},u.int32=function(e){return 0|e()},s.int32=function(){return u.int32(this.engine)},u.uint32=function(e){return e()>>>0},s.uint32=function(){return u.uint32(this.engine)},u.uint53=function(e){return 4294967296*(2097151&e())+(e()>>>0)},s.uint53=function(){return u.uint53(this.engine)},u.uint53Full=function(e){for(;;){var n=0|e();if(!(2097152&n))return 4294967296*(2097151&n)+(e()>>>0);if(2097152==(4194303&n)&&0==(0|e()))return 9007199254740992}},s.uint53Full=function(){return u.uint53Full(this.engine)},u.int53=function(e){var n=0|e();return 4294967296*(2097151&n)+(e()>>>0)+(2097152&n?-9007199254740992:0)},s.int53=function(){return u.int53(this.engine)},u.int53Full=function(e){for(;;){var n=0|e();if(!(4194304&n))return 4294967296*(2097151&n)+(e()>>>0)+(2097152&n?-9007199254740992:0);if(4194304==(8388607&n)&&0==(0|e()))return 9007199254740992}},s.int53Full=function(){return u.int53Full(this.engine)},u.integer=function(){function e(e){return 0==(e+1&e)}function n(n){return e(n)?function(e){return function(n){return n()&e}}(n):function(e){var n=e+1,t=n*Math.floor(4294967296/n);return function(e){var r=0;do{r=e()>>>0}while(r>=t);return r%n}}(n)}function t(n){var t=n+1;if(function(e){return 0==(0|e)}(t)){var r=(t/4294967296|0)-1;if(e(r))return function(e){return function(n){return 4294967296*(n()&e)+(n()>>>0)}}(r)}return function(e){var n=e*Math.floor(9007199254740992/e);return function(t){var r=0;do{r=4294967296*(2097151&t())+(t()>>>0)}while(r>=n);return r%e}}(t)}function r(e,n){return function(t){var r=0;do{var i=0|t();r=4294967296*(2097151&i)+(t()>>>0)+(2097152&i?-9007199254740992:0)}while(r<e||r>n);return r}}return function(e,i){if(e=Math.floor(e),i=Math.floor(i),e<-9007199254740992||!isFinite(e))throw new RangeError("Expected min to be at least -9007199254740992");if(i>9007199254740992||!isFinite(i))throw new RangeError("Expected max to be at most 9007199254740992");var o=i-e;return o<=0||!isFinite(o)?c(e):4294967295===o?0===e?u.uint32:l(u.int32,e+2147483648):o<4294967295?l(n(o),e):9007199254740991===o?l(u.uint53,e):o<9007199254740991?l(t(o),e):i-1-e==9007199254740991?l(u.uint53Full,e):-9007199254740992===e&&9007199254740992===i?u.int53Full:-9007199254740992===e&&9007199254740991===i?u.int53:-9007199254740991===e&&9007199254740992===i?l(u.int53,1):9007199254740992===i?l(r(e-1,i-1),1):r(e,i)}}(),s.integer=function(e,n){return u.integer(e,n)(this.engine)},u.realZeroToOneInclusive=function(e){return u.uint53Full(e)/9007199254740992},s.realZeroToOneInclusive=function(){return u.realZeroToOneInclusive(this.engine)},u.realZeroToOneExclusive=function(e){return u.uint53(e)/9007199254740992},s.realZeroToOneExclusive=function(){return u.realZeroToOneExclusive(this.engine)},u.real=function(){return function(e,n,t){if(!isFinite(e))throw new RangeError("Expected left to be a finite number");if(!isFinite(n))throw new RangeError("Expected right to be a finite number");return l(function(e,n){return 1===n?e:0===n?function(){return 0}:function(t){return e(t)*n}}(t?u.realZeroToOneInclusive:u.realZeroToOneExclusive,n-e),e)}}(),s.real=function(e,n,t){return u.real(e,n,t)(this.engine)},u.bool=function(){function e(e){return 1==(1&e())}function n(e,n){return function(t){return e(t)<n}}return function(t,r){return null==r?null==t?e:function(e){if(e<=0)return c(!1);if(e>=1)return c(!0);var t=4294967296*e;return t%1==0?n(u.int32,t-2147483648|0):n(u.uint53,Math.round(9007199254740992*e))}(t):t<=0?c(!1):t>=r?c(!0):n(u.integer(0,r-1),t)}}(),s.bool=function(e,n){return u.bool(e,n)(this.engine)},u.pick=function(e,n,t,r){var i=n.length,o=null==t?0:f(d(t),i),a=void 0===r?i:f(d(r),i);if(!(o>=a))return n[u.integer(o,a-1)(e)]},s.pick=function(e,n,t){return u.pick(this.engine,e,n,t)};var m=Array.prototype.slice;u.picker=function(e,n,t){var r=m.call(e,n,t);if(!r.length)return h;var i=u.integer(0,r.length-1);return function(e){return r[i(e)]}},u.shuffle=function(e,n,t){var r=n.length;if(r){null==t&&(t=0);for(var i=r-1>>>0;i>t;--i){var o=u.integer(0,i)(e);if(i!==o){var a=n[i];n[i]=n[o],n[o]=a}}}return n},s.shuffle=function(e){return u.shuffle(this.engine,e)},u.sample=function(e,n,t){if(t<0||t>n.length||!isFinite(t))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===t)return[];var r=m.call(n),i=r.length;if(i===t)return u.shuffle(e,r,0);var o=i-t;return u.shuffle(e,r,o-1).slice(o)},s.sample=function(e,n){return u.sample(this.engine,e,n)},u.die=function(e){return u.integer(1,e)},s.die=function(e){return u.die(e)(this.engine)},u.dice=function(e,n){var t=u.die(e);return function(e){var r=[];r.length=n;for(var i=0;i<n;++i)r[i]=t(e);return r}},s.dice=function(e,n){return u.dice(e,n)(this.engine)},u.uuid4=function(){function e(e,n){return a("0",n-e.length)+e}return function(n){var t=n()>>>0,r=0|n(),i=0|n(),o=n()>>>0;return e(t.toString(16),8)+"-"+e((65535&r).toString(16),4)+"-"+e((r>>4&4095|16384).toString(16),4)+"-"+e((16383&i|32768).toString(16),4)+"-"+e((i>>4&65535).toString(16),4)+e(o.toString(16),8)}}(),s.uuid4=function(){return u.uuid4(this.engine)},u.string=function(e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var n=e.length;if(!n)throw new Error("Expected pool not to be an empty string");var t=u.integer(0,n-1);return function(n,r){for(var i="",o=0;o<r;++o){var a=t(n);i+=e.charAt(a)}return i}},s.string=function(e,n){return u.string(n)(this.engine,e)},u.hex=function(){var e=u.string("0123456789abcdef"),n=u.string("0123456789abcdef".toUpperCase());return function(t){return t?n:e}}(),s.hex=function(e,n){return u.hex(n)(this.engine,e)},u.date=function(e,n){if(!(e instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof e);if(!(n instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof n);var t=u.integer(e.getTime(),n.getTime());return function(e){return new Date(t(e))}},s.date=function(e,n){return u.date(e,n)(this.engine)},void 0===(r=function(){return u}.call(n,t,n,e))||(e.exports=r)}()},function(e,n,t){"use strict";t.r(n);var r=t(0),i=t.n(r);const o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){window.setTimeout(e,1e3/60)},a=function(e,n){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,n);var t=performance.now(),r=new Object;return r.value=o(function i(){performance.now()-t>=n?e.call():r.value=o(i)}),r},u=function(e,n){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,n);var t=performance.now(),r=new Object;return r.value=o(function i(){performance.now()-t>=n&&(e.call(),t=performance.now()),r.value=o(i)}),r},s=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearInterval(e)};const c=e=>e.json();window.addEventListener("load",e=>{Promise.all([fetch("./config.json").then(c),fetch("./users.json").then(c)]).then(([e,n])=>{window.app=new class{constructor(e,n,t){for(this._config=e,this._div=t,this._wrapper=this._div.querySelector(".wrapper"),this._random_engine=i.a.engines.mt19937(),this._random_engine.seed(this._config.seed),this._random_generator=new i.a(this._random_engine),this._round=[[]];n.length>0;){const e=this._random_generator.integer(0,n.length-1);this._round[0].push(n[e]),n.splice(e,1)}this.start=this.start.bind(this),this.round_0=this.round_0.bind(this),this.round_x=this.round_x.bind(this),this.determine_winner=this.determine_winner.bind(this),this.finish_round=this.finish_round.bind(this),this.fix_round_participants=this.fix_round_participants.bind(this),this.scroll_element_into_view=this.scroll_element_into_view.bind(this),this.create_group_div=this.create_group_div.bind(this),this.create_participant_div=this.create_participant_div.bind(this)}async start(){this.round_0()}async round_0(){this.fix_round_participants(0);const e=this.create_group_div();e.classList.remove("hide"),e.classList.remove("right"),this._wrapper.insertAdjacentElement("beforeend",e),this._round[0].forEach(n=>{e.insertAdjacentElement("beforeend",this.create_participant_div(n))}),a(n=>{scrollTo(0,0);let t=0;const r=e.querySelectorAll(".participant.hide");r.forEach(e=>{const n=this;e.addEventListener("transitionend",function e(){this.removeEventListener("transitionend",e),++t>=r.length?n.round_x(1):(n.scroll_element_into_view(r[t]),r[t].classList.remove("hide"))})}),r[t].classList.remove("hide")},50)}async round_x(e){await this.round_begin_message(e);const n=this._wrapper.querySelector(".group"),t=this._round[e-1];this._round[e]=[];const r=this.create_group_div();this._wrapper.insertAdjacentElement("beforeend",r);for(let e=0;e<t.length/2;e++){const e=this.create_participant_div("?");r.insertAdjacentElement("beforeend",e)}r.classList.remove("hide"),a(i=>{scrollTo(0,0);const o=n.querySelectorAll(".participant"),c=r.querySelectorAll(".participant");let l=0,d=0;c.forEach(n=>{const r=this;n.addEventListener("transitionend",function n(){if(this.removeEventListener("transitionend",n),o[l].classList.add("active"),o[l+1].classList.add("active"),c[d].classList.add("unknown"),r.scroll_element_into_view(c[d]),"---"===t[l+1])return c[d].innerText=t[l],r._round[e].push(t[l]),c[d].classList.add("winner"),c[d].classList.remove("unknown"),void a(n=>{c[d].classList.remove("winner"),o[l].classList.remove("active"),o[l+1].classList.remove("active"),(l+=2)>=t.length&&r.finish_round(e)},1e3);let i=0;const f=u(e=>{c[d].innerText=t[l+i],i=(i+1)%2},100);a(n=>{r.determine_winner(t[l],t[l+1]).then(n=>{a(i=>{s(f),c[d].innerText=t[l+n],r._round[e].push(t[l+n]),c[d].classList.add("winner"),c[d].classList.remove("unknown"),a(n=>{c[d].classList.remove("winner"),o[l].classList.remove("active"),o[l+1].classList.remove("active"),(l+=2)>=t.length?r.finish_round(e):c[++d].classList.remove("hide")},500)},750)})},750)})}),c[d].classList.remove("hide")},50)}round_begin_message(e){return new Promise((n,t)=>{const r=this._div.querySelector(".modal-wrapper"),i=r.querySelector(".modal .header"),o=r.querySelector(".modal .text"),u=document.createElement("h2");u.classList.add("title"),u.innerText=`Round ${e} Begins!`,i.insertAdjacentElement("beforeend",u),o.innerText="Best of luck participants!",r.classList.remove("hide"),a(e=>{r.classList.add("hide"),u.remove(),o.innerText="",n(!0)},2100)})}determine_winner(e,n){return new Promise((t,r)=>{const i=this._div.querySelector(".modal-wrapper"),o=i.querySelector(".modal .header"),c=i.querySelector(".modal .text"),l=document.createElement("h2");l.classList.add("title");const d=document.createElement("h2");d.classList.add("title"),d.classList.add("hide"),l.innerText=`${e} VS ${n}`,o.insertAdjacentElement("beforeend",l),o.insertAdjacentElement("beforeend",d);let f=1;c.innerText="Selecting winner.";const h=u(e=>{f=f%4+1,c.innerText=`Selecting Winner${new Array(f).join(".")}`},300);a(r=>{s(h),c.innerText="Winner Selected!";const u=this._random_generator.integer(0,1);let f=n;u%2==0&&(f=e),d.innerText=`${f} is the winner!`,a(e=>{o.classList.add("next"),l.classList.add("hide"),d.classList.remove("hide"),o.addEventListener("transitionend",function e(){o.removeEventListener("transitionend",e),a(e=>{i.classList.add("hide"),o.classList.remove("next"),l.remove(),d.remove(),c.innerText="",t(u)},2e3)})},500)},3e3),i.classList.remove("hide")})}async finish_round(e){if(this._round[e].length<=1)return void this.end(this._round[e][0]);const n=this._wrapper.querySelectorAll(".group");n[0].addEventListener("transitionend",function e(){n[0].removeEventListener("transitionend",e),n[0].remove(),a(e=>{n[1].classList.remove("right")},50)});const t=this;n[1].addEventListener("transitionend",function r(){n[1].removeEventListener("transitionend",r);const i=t._round[e].length;t.fix_round_participants(e);const o=t._round[e].length;if(o>i)for(let r=i;r<o;r++){const i=t.create_participant_div(t._round[e][r]);i.classList.remove("hide"),n[1].insertAdjacentElement("beforeend",i)}a(n=>{t.round_x(e+1)},1e3)}),n[0].classList.add("hide")}async end(e){const n=this._div.querySelector(".modal-wrapper"),t=n.querySelector(".modal .header"),r=n.querySelector(".modal .text"),i=document.createElement("h2");i.classList.add("title"),i.innerText=`${e} IS THE WINNER!!!`,t.insertAdjacentElement("beforeend",i),r.innerText="CONGRATULATIONS!",this._wrapper.classList.add("hide"),n.classList.remove("hide")}fix_round_participants(e){this._round[e].length%2==1&&this._round[e].push("---")}async scroll_element_into_view(e){e.scrollIntoView({behavior:"smooth"})}create_group_div(){const e=document.createElement("div");return e.classList.add("group"),e.classList.add("right"),e.classList.add("hide"),e}create_participant_div(e){const n=document.createElement("div");return n.classList.add("participant"),n.classList.add("hide"),n.innerText=e,n}}(e,n,document.querySelector("#app")),setTimeout(e=>app.start(),150)})})}]);
//# sourceMappingURL=index.js.map