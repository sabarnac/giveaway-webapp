!function(e){var n={};function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(i,r,function(n){return e[n]}.bind(null,r));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=1)}([function(e,n,t){var i;!function(r){"use strict";var o="function"!=typeof Math.imul||-5!==Math.imul(4294967295,5)?function(e,n){var t=65535&e,i=65535&n;return t*i+((e>>>16&65535)*i+t*(n>>>16&65535)<<16>>>0)|0}:Math.imul,a="function"==typeof String.prototype.repeat&&"xxx"==="x".repeat(3)?function(e,n){return e.repeat(n)}:function(e,n){for(var t="";n>0;)1&n&&(t+=e),n>>=1,e+=e;return t};function s(e){if(!(this instanceof s))return new s(e);if(null==e)e=s.engines.nativeMath;else if("function"!=typeof e)throw new TypeError("Expected engine to be a function, got "+typeof e);this.engine=e}var u=s.prototype;function c(e){return function(){return e}}function l(e,n){return 0===n?e:function(t){return e(t)+n}}function d(e){var n=+e;return n<0?Math.ceil(n):Math.floor(n)}function f(e,n){return e<0?Math.max(e+n,0):Math.min(e,n)}function h(){}s.engines={nativeMath:function(){return 4294967296*Math.random()|0},mt19937:function(e){function n(e){for(var n=0,t=0;(0|n)<227;n=n+1|0)t=2147483648&e[n]|2147483647&e[n+1|0],e[n]=e[n+397|0]^t>>>1^(1&t?2567483615:0);for(;(0|n)<623;n=n+1|0)t=2147483648&e[n]|2147483647&e[n+1|0],e[n]=e[n-227|0]^t>>>1^(1&t?2567483615:0);t=2147483648&e[623]|2147483647&e[0],e[623]=e[396]^t>>>1^(1&t?2567483615:0)}return function(){var t=new e(624),i=0,r=0;function a(){(0|i)>=624&&(n(t),i=0);var e=t[i];return i=i+1|0,r+=1,0|function(e){return e^=e>>>11,e^=e<<7&2636928640,(e^=e<<15&4022730752)^e>>>18}(e)}return a.getUseCount=function(){return r},a.discard=function(e){for(r+=e,(0|i)>=624&&(n(t),i=0);e-i>624;)e-=624-i,n(t),i=0;return i=i+e|0,a},a.seed=function(e){var n=0;t[0]=n=0|e;for(var s=1;s<624;s=s+1|0)t[s]=n=o(n^n>>>30,1812433253)+s|0;return i=624,r=0,a},a.seedWithArray=function(e){return a.seed(19650218),function(e,n){for(var t=1,i=0,r=n.length,a=0|Math.max(r,624),s=0|e[0];(0|a)>0;--a)e[t]=s=(e[t]^o(s^s>>>30,1664525))+(0|n[i])+(0|i)|0,++i,(0|(t=t+1|0))>623&&(e[0]=e[623],t=1),i>=r&&(i=0);for(a=623;(0|a)>0;--a)e[t]=s=(e[t]^o(s^s>>>30,1566083941))-t|0,(0|(t=t+1|0))>623&&(e[0]=e[623],t=1);e[0]=2147483648}(t,e),a},a.autoSeed=function(){return a.seedWithArray(s.generateEntropyArray())},a}}("function"==typeof Int32Array?Int32Array:Array),browserCrypto:"undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof Int32Array?function(){var e=null,n=128;return function(){return n>=128&&(null===e&&(e=new Int32Array(128)),crypto.getRandomValues(e),n=0),0|e[n++]}}():null},s.generateEntropyArray=function(){for(var e=[],n=s.engines.nativeMath,t=0;t<16;++t)e[t]=0|n();return e.push(0|(new Date).getTime()),e},s.int32=function(e){return 0|e()},u.int32=function(){return s.int32(this.engine)},s.uint32=function(e){return e()>>>0},u.uint32=function(){return s.uint32(this.engine)},s.uint53=function(e){return 4294967296*(2097151&e())+(e()>>>0)},u.uint53=function(){return s.uint53(this.engine)},s.uint53Full=function(e){for(;;){var n=0|e();if(!(2097152&n))return 4294967296*(2097151&n)+(e()>>>0);if(2097152==(4194303&n)&&0==(0|e()))return 9007199254740992}},u.uint53Full=function(){return s.uint53Full(this.engine)},s.int53=function(e){var n=0|e();return 4294967296*(2097151&n)+(e()>>>0)+(2097152&n?-9007199254740992:0)},u.int53=function(){return s.int53(this.engine)},s.int53Full=function(e){for(;;){var n=0|e();if(!(4194304&n))return 4294967296*(2097151&n)+(e()>>>0)+(2097152&n?-9007199254740992:0);if(4194304==(8388607&n)&&0==(0|e()))return 9007199254740992}},u.int53Full=function(){return s.int53Full(this.engine)},s.integer=function(){function e(e){return 0==(e+1&e)}function n(n){return e(n)?function(e){return function(n){return n()&e}}(n):function(e){var n=e+1,t=n*Math.floor(4294967296/n);return function(e){var i=0;do{i=e()>>>0}while(i>=t);return i%n}}(n)}function t(n){var t=n+1;if(function(e){return 0==(0|e)}(t)){var i=(t/4294967296|0)-1;if(e(i))return function(e){return function(n){return 4294967296*(n()&e)+(n()>>>0)}}(i)}return function(e){var n=e*Math.floor(9007199254740992/e);return function(t){var i=0;do{i=4294967296*(2097151&t())+(t()>>>0)}while(i>=n);return i%e}}(t)}function i(e,n){return function(t){var i=0;do{var r=0|t();i=4294967296*(2097151&r)+(t()>>>0)+(2097152&r?-9007199254740992:0)}while(i<e||i>n);return i}}return function(e,r){if(e=Math.floor(e),r=Math.floor(r),e<-9007199254740992||!isFinite(e))throw new RangeError("Expected min to be at least -9007199254740992");if(r>9007199254740992||!isFinite(r))throw new RangeError("Expected max to be at most 9007199254740992");var o=r-e;return o<=0||!isFinite(o)?c(e):4294967295===o?0===e?s.uint32:l(s.int32,e+2147483648):o<4294967295?l(n(o),e):9007199254740991===o?l(s.uint53,e):o<9007199254740991?l(t(o),e):r-1-e==9007199254740991?l(s.uint53Full,e):-9007199254740992===e&&9007199254740992===r?s.int53Full:-9007199254740992===e&&9007199254740991===r?s.int53:-9007199254740991===e&&9007199254740992===r?l(s.int53,1):9007199254740992===r?l(i(e-1,r-1),1):i(e,r)}}(),u.integer=function(e,n){return s.integer(e,n)(this.engine)},s.realZeroToOneInclusive=function(e){return s.uint53Full(e)/9007199254740992},u.realZeroToOneInclusive=function(){return s.realZeroToOneInclusive(this.engine)},s.realZeroToOneExclusive=function(e){return s.uint53(e)/9007199254740992},u.realZeroToOneExclusive=function(){return s.realZeroToOneExclusive(this.engine)},s.real=function(){return function(e,n,t){if(!isFinite(e))throw new RangeError("Expected left to be a finite number");if(!isFinite(n))throw new RangeError("Expected right to be a finite number");return l(function(e,n){return 1===n?e:0===n?function(){return 0}:function(t){return e(t)*n}}(t?s.realZeroToOneInclusive:s.realZeroToOneExclusive,n-e),e)}}(),u.real=function(e,n,t){return s.real(e,n,t)(this.engine)},s.bool=function(){function e(e){return 1==(1&e())}function n(e,n){return function(t){return e(t)<n}}return function(t,i){return null==i?null==t?e:function(e){if(e<=0)return c(!1);if(e>=1)return c(!0);var t=4294967296*e;return t%1==0?n(s.int32,t-2147483648|0):n(s.uint53,Math.round(9007199254740992*e))}(t):t<=0?c(!1):t>=i?c(!0):n(s.integer(0,i-1),t)}}(),u.bool=function(e,n){return s.bool(e,n)(this.engine)},s.pick=function(e,n,t,i){var r=n.length,o=null==t?0:f(d(t),r),a=void 0===i?r:f(d(i),r);if(!(o>=a))return n[s.integer(o,a-1)(e)]},u.pick=function(e,n,t){return s.pick(this.engine,e,n,t)};var m=Array.prototype.slice;s.picker=function(e,n,t){var i=m.call(e,n,t);if(!i.length)return h;var r=s.integer(0,i.length-1);return function(e){return i[r(e)]}},s.shuffle=function(e,n,t){var i=n.length;if(i){null==t&&(t=0);for(var r=i-1>>>0;r>t;--r){var o=s.integer(0,r)(e);if(r!==o){var a=n[r];n[r]=n[o],n[o]=a}}}return n},u.shuffle=function(e){return s.shuffle(this.engine,e)},s.sample=function(e,n,t){if(t<0||t>n.length||!isFinite(t))throw new RangeError("Expected sampleSize to be within 0 and the length of the population");if(0===t)return[];var i=m.call(n),r=i.length;if(r===t)return s.shuffle(e,i,0);var o=r-t;return s.shuffle(e,i,o-1).slice(o)},u.sample=function(e,n){return s.sample(this.engine,e,n)},s.die=function(e){return s.integer(1,e)},u.die=function(e){return s.die(e)(this.engine)},s.dice=function(e,n){var t=s.die(e);return function(e){var i=[];i.length=n;for(var r=0;r<n;++r)i[r]=t(e);return i}},u.dice=function(e,n){return s.dice(e,n)(this.engine)},s.uuid4=function(){function e(e,n){return a("0",n-e.length)+e}return function(n){var t=n()>>>0,i=0|n(),r=0|n(),o=n()>>>0;return e(t.toString(16),8)+"-"+e((65535&i).toString(16),4)+"-"+e((i>>4&4095|16384).toString(16),4)+"-"+e((16383&r|32768).toString(16),4)+"-"+e((r>>4&65535).toString(16),4)+e(o.toString(16),8)}}(),u.uuid4=function(){return s.uuid4(this.engine)},s.string=function(e){null==e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-");var n=e.length;if(!n)throw new Error("Expected pool not to be an empty string");var t=s.integer(0,n-1);return function(n,i){for(var r="",o=0;o<i;++o){var a=t(n);r+=e.charAt(a)}return r}},u.string=function(e,n){return s.string(n)(this.engine,e)},s.hex=function(){var e=s.string("0123456789abcdef"),n=s.string("0123456789abcdef".toUpperCase());return function(t){return t?n:e}}(),u.hex=function(e,n){return s.hex(n)(this.engine,e)},s.date=function(e,n){if(!(e instanceof Date))throw new TypeError("Expected start to be a Date, got "+typeof e);if(!(n instanceof Date))throw new TypeError("Expected end to be a Date, got "+typeof n);var t=s.integer(e.getTime(),n.getTime());return function(e){return new Date(t(e))}},u.date=function(e,n){return s.date(e,n)(this.engine)},void 0===(i=function(){return s}.call(n,t,n,e))||(e.exports=i)}()},function(e,n,t){"use strict";t.r(n);var i=t(0),r=t.n(i);const o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,n){window.setTimeout(e,1e3/60)},a=function(e,n){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setTimeout(e,n);var t=performance.now(),i=new Object;return i.value=o(function r(){performance.now()-t>=n?e.call():i.value=o(r)}),i},s=function(e,n){if(!(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame&&window.mozCancelRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame))return window.setInterval(e,n);var t=performance.now(),i=new Object;return i.value=o(function r(){performance.now()-t>=n&&(e.call(),t=performance.now()),i.value=o(r)}),i},u=function(e){window.cancelAnimationFrame?window.cancelAnimationFrame(e.value):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e.value):window.webkitCancelRequestAnimationFrame?window.webkitCancelRequestAnimationFrame(e.value):window.mozCancelRequestAnimationFrame?window.mozCancelRequestAnimationFrame(e.value):window.oCancelRequestAnimationFrame?window.oCancelRequestAnimationFrame(e.value):window.msCancelRequestAnimationFrame?window.msCancelRequestAnimationFrame(e.value):clearInterval(e)};const c=e=>e.json();window.addEventListener("load",e=>{Promise.all([fetch("./config.json").then(c),fetch("./users.json").then(c)]).then(([e,n])=>{window.app=new class{constructor(e,n,t){for(this._config=e,this._div=t,this._wrapper=this._div.querySelector(".wrapper"),this._random_engine=r.a.engines.mt19937(),this._random_engine.seed(this._config.seed),this._random_generator=new r.a(this._random_engine),this._round=[[]];n.length>0;){const e=this._random_generator.integer(0,n.length-1);this._round[0].push(n[e]),n.splice(e,1)}this._original_messages=this._config.messages,this._messages=[...this._original_messages],this.start=this.start.bind(this),this.round_0=this.round_0.bind(this),this.show_participants=this.show_participants.bind(this),this.round_x=this.round_x.bind(this),this.begin_round_matches=this.begin_round_matches.bind(this),this.default_participant_match=this.default_participant_match.bind(this),this.participant_match=this.participant_match.bind(this),this.determine_winner=this.determine_winner.bind(this),this.finish_round=this.finish_round.bind(this),this.fix_round_participants=this.fix_round_participants.bind(this),this.scroll_element_into_view=this.scroll_element_into_view.bind(this),this.create_group_div=this.create_group_div.bind(this),this.create_participant_div=this.create_participant_div.bind(this)}async start(){this.round_0()}async round_0(){this.fix_round_participants(0);const e=this.create_group_div();e.classList.remove("hide"),e.classList.remove("right"),this._wrapper.insertAdjacentElement("beforeend",e),this._round[0].forEach(n=>{e.insertAdjacentElement("beforeend",this.create_participant_div(n))}),a(n=>{this.show_participants(e)},50)}show_participants(e){scrollTo(0,0);let n=0;const t=e.querySelectorAll(".participant.hide");t.forEach(e=>{const i=this;e.addEventListener("transitionend",function e(){this.removeEventListener("transitionend",e),++n>=t.length?i.round_x(1):(i.scroll_element_into_view(t[n]),t[n].classList.remove("hide"))})}),t[n].classList.remove("hide")}async round_x(e){await this.round_begin_message(e);const n=this._wrapper.querySelector(".group"),t=this._round[e-1];this._round[e]=[];const i=this.create_group_div();this._wrapper.insertAdjacentElement("beforeend",i);for(let e=0;e<t.length/2;e++){const e=this.create_participant_div("?");i.insertAdjacentElement("beforeend",e)}i.classList.remove("hide"),a(r=>{this.begin_round_matches(e,n,i,t)},50)}async begin_round_matches(e,n,t,i){scrollTo(0,0);const r=n.querySelectorAll(".participant"),o=t.querySelectorAll(".participant");let a=0,s=0;o.forEach(n=>{const t=this;n.addEventListener("transitionend",async function n(){this.removeEventListener("transitionend",n),r[a].classList.add("active"),r[a+1].classList.add("active"),o[s].classList.add("unknown"),t.scroll_element_into_view(o[s]),"---"!==i[a+1]?(await t.participant_match(e,o,s,r,i,a),(a+=2)>=i.length?this.finish_round(e):o[++s].classList.remove("hide")):t.default_participant_match(e,o,s,r,i,a)})}),o[s].classList.remove("hide")}round_begin_message(e){return new Promise((n,t)=>{const i=this._div.querySelector(".modal-wrapper"),r=i.querySelector(".modal .header"),o=i.querySelector(".modal .text"),s=document.createElement("h2");s.classList.add("title"),s.innerText=`Round ${e} Begins!`,r.insertAdjacentElement("beforeend",s),o.innerText="Best of luck participants!",i.classList.remove("hide"),a(e=>{i.classList.add("hide"),s.remove(),o.innerText="",n(!0)},2100)})}participant_match(e,n,t,i,r,o){return new Promise((c,l)=>{let d=0;const f=s(e=>{n[t].innerText=r[o+d],d=(d+1)%2},100);a(s=>{this.determine_winner(r[o],r[o+1]).then(s=>{a(l=>{u(f),n[t].innerText=r[o+s],this._round[e].push(r[o+s]),n[t].classList.add("winner"),n[t].classList.remove("unknown"),a(e=>{n[t].classList.remove("winner"),i[o].classList.remove("active"),i[o+1].classList.remove("active"),c(!0)},500)},750)})},750)})}async default_participant_match(e,n,t,i,r,o){n[t].innerText=r[o],this._round[e].push(r[o]),n[t].classList.add("winner"),n[t].classList.remove("unknown"),a(r=>{n[t].classList.remove("winner"),i[o].classList.remove("active"),i[o+1].classList.remove("active"),this.finish_round(e)},1e3)}determine_winner(e,n){return new Promise((t,i)=>{const r=this._div.querySelector(".modal-wrapper"),o=r.querySelector(".modal .header"),c=r.querySelector(".modal .text"),l=document.createElement("h2");l.classList.add("title");const d=document.createElement("h2");d.classList.add("title"),d.classList.add("hide"),l.innerText=`${e} VS ${n}`,o.insertAdjacentElement("beforeend",l),o.insertAdjacentElement("beforeend",d);let f=1;c.innerText="Selecting winner.";const h=s(e=>{f=f%4+1,c.innerText=`Selecting Winner${new Array(f).join(".")}`},300);a(i=>{u(h);const s=this._random_generator.integer(0,1);let f=n,m=e;s%2==0&&(f=e,m=n),0===this._messages.length&&(this._message=[...this._original_messages]);const p=this._random_generator.integer(0,this._messages.length-1);c.innerHTML=this._messages.splice(p,1)[0].replace(/\#winner/g,f).replace(/\#loser/g,m),d.innerText=`${f} is the winner!`,a(e=>{o.classList.add("next"),l.classList.add("hide"),d.classList.remove("hide"),o.addEventListener("transitionend",function e(){o.removeEventListener("transitionend",e),a(e=>{r.classList.add("hide"),o.classList.remove("next"),l.remove(),d.remove(),c.innerText="",t(s)},3500)})},500)},3e3),r.classList.remove("hide")})}async finish_round(e){if(this._round[e].length<=1)return void this.end(this._round[e][0]);const n=this._wrapper.querySelectorAll(".group");n[0].addEventListener("transitionend",function e(){n[0].removeEventListener("transitionend",e),n[0].remove(),a(e=>{n[1].classList.remove("right")},50)});const t=this;n[1].addEventListener("transitionend",function i(){n[1].removeEventListener("transitionend",i);const r=t._round[e].length;t.fix_round_participants(e);const o=t._round[e].length;if(o>r)for(let i=r;i<o;i++){const r=t.create_participant_div(t._round[e][i]);r.classList.remove("hide"),n[1].insertAdjacentElement("beforeend",r)}a(n=>{t.round_x(e+1)},1e3)}),n[0].classList.add("hide")}async end(e){const n=this._div.querySelector(".modal-wrapper"),t=n.querySelector(".modal .header"),i=n.querySelector(".modal .text"),r=document.createElement("h2");r.classList.add("title"),r.innerText=`${e} IS THE WINNER!!!`,t.insertAdjacentElement("beforeend",r),i.innerText="CONGRATULATIONS!",this._wrapper.classList.add("hide"),n.classList.remove("hide")}fix_round_participants(e){this._round[e].length%2==1&&this._round[e].push("---")}async scroll_element_into_view(e){e.scrollIntoView({behavior:"smooth"})}create_group_div(){const e=document.createElement("div");return e.classList.add("group"),e.classList.add("right"),e.classList.add("hide"),e}create_participant_div(e){const n=document.createElement("div");return n.classList.add("participant"),n.classList.add("hide"),n.innerText=e,n}}(e,n,document.querySelector("#app")),setTimeout(e=>app.start(),150)})})}]);
//# sourceMappingURL=index.js.map